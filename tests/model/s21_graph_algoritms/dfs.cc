#include <gtest/gtest.h>

#include <string>
#include <vector>

#include "../../../src/model/s21_graph/s21_graph.h"
#include "../../../src/model/s21_graph_algorithms/s21_graph_algorithms.h"
#include "matrix.h"

struct DFSDataTest {
  std::string filename_;
  s21::Graph::Vertex start_vertex_;
  std::vector<s21::Graph::Vertex> vertices_;
};

class DFSTest : public testing::TestWithParam<int> {
 public:
  static int count_;
  static std::vector<DFSDataTest> test_data_;
};

int DFSTest::count_ = 47;
std::vector<DFSDataTest> DFSTest::test_data_ = {
    DFSDataTest{"graphs/1.txt", 1, {1, 2, 3, 5, 4}},
    DFSDataTest{"graphs/1.txt", 2, {2, 1, 3, 5, 4}},
    DFSDataTest{"graphs/1.txt", 3, {3, 1, 2, 5, 4}},
    DFSDataTest{"graphs/1.txt", 4, {4, 1, 2, 3, 5}},
    DFSDataTest{"graphs/1.txt", 5, {5, 2, 1, 3, 4}},
    DFSDataTest{"graphs/2.txt", 1, {1, 2, 3, 4, 5, 7, 8, 6, 9}},
    DFSDataTest{"graphs/2.txt", 2, {2, 1, 3, 4, 5, 7, 8, 6, 9}},
    DFSDataTest{"graphs/2.txt", 3, {3, 1, 2, 4, 5, 7, 8, 6, 9}},
    DFSDataTest{"graphs/2.txt", 4, {4, 1, 2, 3, 6, 8, 5, 7, 9}},
    DFSDataTest{"graphs/2.txt", 5, {5, 4, 1, 2, 3, 6, 8, 9, 7}},
    DFSDataTest{"graphs/2.txt", 6, {6, 2, 1, 3, 4, 5, 7, 8, 9}},
    DFSDataTest{"graphs/2.txt", 7, {7, 1, 2, 3, 4, 5, 8, 6, 9}},
    DFSDataTest{"graphs/2.txt", 8, {8, 5, 4, 1, 2, 3, 6, 9, 7}},
    DFSDataTest{"graphs/2.txt", 9, {9, 6, 2, 1, 3, 4, 5, 7, 8}},
    DFSDataTest{"graphs/3.txt", 1, {1, 2, 3, 4, 5, 6}},
    DFSDataTest{"graphs/3.txt", 2, {2, 1, 6, 5, 4, 3}},
    DFSDataTest{"graphs/3.txt", 3, {3, 2, 1, 6, 5, 4}},
    DFSDataTest{"graphs/3.txt", 4, {4, 3, 2, 1, 6, 5}},
    DFSDataTest{"graphs/3.txt", 5, {5, 4, 3, 2, 1, 6}},
    DFSDataTest{"graphs/3.txt", 6, {6, 1, 2, 3, 4, 5}},
    DFSDataTest{"graphs/4.txt", 1, {1, 2, 3, 4, 6, 5}},
    DFSDataTest{"graphs/4.txt", 2, {2, 1, 3, 4, 6, 5}},
    DFSDataTest{"graphs/4.txt", 3, {3, 1, 2, 5, 4, 6}},
    DFSDataTest{"graphs/4.txt", 4, {4, 1, 2, 3, 5, 6}},
    DFSDataTest{"graphs/4.txt", 5, {5, 1, 2, 3, 4, 6}},
    DFSDataTest{"graphs/4.txt", 6, {6, 1, 2, 3, 4, 5}},
    DFSDataTest{"graphs/5.txt", 1, {1, 2, 3, 4}},
    DFSDataTest{"graphs/5.txt", 2, {2, 3, 1, 4}},
    DFSDataTest{"graphs/5.txt", 3, {3, 1, 2, 4}},
    DFSDataTest{"graphs/5.txt", 4, {4, 1, 2, 3}},
    DFSDataTest{"graphs/6.txt",
                11,
                {11,  4,  1,   2,   5,  15, 16, 17, 6,  18, 20, 21, 22, 19, 23,
                 24,  25, 7,   26,  30, 27, 31, 32, 33, 28, 34, 35, 29, 36, 37,
                 8,   38, 41,  42,  39, 43, 44, 45, 40, 46, 47, 3,  9,  48, 53,
                 54,  49, 55,  56,  57, 50, 58, 59, 60, 10, 51, 61, 62, 63, 52,
                 64,  65, 66,  67,  12, 70, 85, 86, 87, 71, 89, 72, 88, 90, 13,
                 73,  91, 92,  93,  74, 94, 75, 97, 76, 95, 96, 14, 77, 98, 99,
                 100, 78, 101, 102, 68, 79, 80, 81, 69, 82, 83, 84}},
    DFSDataTest{
        "graphs/6.txt",
        44,
        {44, 39, 8,  2,  1,  3,  9,  48, 53, 54, 49, 55, 56, 57,  50, 58,  59,
         60, 10, 51, 61, 62, 63, 52, 64, 65, 66, 67, 4,  11, 68,  79, 80,  81,
         69, 82, 83, 84, 12, 70, 85, 86, 87, 71, 89, 72, 88, 90,  13, 73,  91,
         92, 93, 74, 94, 75, 97, 76, 95, 96, 14, 77, 98, 99, 100, 78, 101, 102,
         5,  15, 16, 17, 6,  18, 20, 21, 22, 19, 23, 24, 25, 7,   26, 30,  27,
         31, 32, 33, 28, 34, 35, 29, 36, 37, 38, 41, 42, 40, 46,  47, 43,  45}},
    DFSDataTest{"graphs/6.txt",
                91,
                {91, 73,  13,  4,  1,  2,  5,  15, 16, 17, 6,  18, 20, 21, 22,
                 19, 23,  24,  25, 7,  26, 30, 27, 31, 32, 33, 28, 34, 35, 29,
                 36, 37,  8,   38, 41, 42, 39, 43, 44, 45, 40, 46, 47, 3,  9,
                 48, 53,  54,  49, 55, 56, 57, 50, 58, 59, 60, 10, 51, 61, 62,
                 63, 52,  64,  65, 66, 67, 11, 68, 79, 80, 81, 69, 82, 83, 84,
                 12, 70,  85,  86, 87, 71, 89, 72, 88, 90, 14, 77, 98, 99, 100,
                 78, 101, 102, 74, 94, 75, 97, 76, 95, 96, 92, 93}},
    DFSDataTest{"graphs/6.txt",
                102,
                {102, 78, 14, 4,  1,  2,  5,  15, 16, 17, 6,   18, 20, 21, 22,
                 19,  23, 24, 25, 7,  26, 30, 27, 31, 32, 33,  28, 34, 35, 29,
                 36,  37, 8,  38, 41, 42, 39, 43, 44, 45, 40,  46, 47, 3,  9,
                 48,  53, 54, 49, 55, 56, 57, 50, 58, 59, 60,  10, 51, 61, 62,
                 63,  52, 64, 65, 66, 67, 11, 68, 79, 80, 81,  69, 82, 83, 84,
                 12,  70, 85, 86, 87, 71, 89, 72, 88, 90, 13,  73, 91, 92, 93,
                 74,  94, 75, 97, 76, 95, 96, 77, 98, 99, 100, 101}},
    DFSDataTest{
        "graphs/6.txt",
        35,
        {35, 28, 7,  2,  1,  3,  9,  48, 53, 54, 49, 55, 56, 57,  50, 58,  59,
         60, 10, 51, 61, 62, 63, 52, 64, 65, 66, 67, 4,  11, 68,  79, 80,  81,
         69, 82, 83, 84, 12, 70, 85, 86, 87, 71, 89, 72, 88, 90,  13, 73,  91,
         92, 93, 74, 94, 75, 97, 76, 95, 96, 14, 77, 98, 99, 100, 78, 101, 102,
         5,  15, 16, 17, 6,  18, 20, 21, 22, 19, 23, 24, 25, 8,   38, 41,  42,
         39, 43, 44, 45, 40, 46, 47, 26, 30, 27, 31, 32, 33, 29,  36, 37,  34}},
    DFSDataTest{
        "graphs/6.txt",
        17,
        {17, 15, 5,  2,  1,  3,  9,  48, 53, 54, 49, 55, 56, 57,  50, 58,  59,
         60, 10, 51, 61, 62, 63, 52, 64, 65, 66, 67, 4,  11, 68,  79, 80,  81,
         69, 82, 83, 84, 12, 70, 85, 86, 87, 71, 89, 72, 88, 90,  13, 73,  91,
         92, 93, 74, 94, 75, 97, 76, 95, 96, 14, 77, 98, 99, 100, 78, 101, 102,
         6,  18, 20, 21, 22, 19, 23, 24, 25, 7,  26, 30, 27, 31,  32, 33,  28,
         34, 35, 29, 36, 37, 8,  38, 41, 42, 39, 43, 44, 45, 40,  46, 47,  16}},
    DFSDataTest{"graphs/6.txt",
                8,
                {8,  2,  1,   3,  9,   48,  53, 54, 49, 55, 56, 57, 50, 58, 59,
                 60, 10, 51,  61, 62,  63,  52, 64, 65, 66, 67, 4,  11, 68, 79,
                 80, 81, 69,  82, 83,  84,  12, 70, 85, 86, 87, 71, 89, 72, 88,
                 90, 13, 73,  91, 92,  93,  74, 94, 75, 97, 76, 95, 96, 14, 77,
                 98, 99, 100, 78, 101, 102, 5,  15, 16, 17, 6,  18, 20, 21, 22,
                 19, 23, 24,  25, 7,   26,  30, 27, 31, 32, 33, 28, 34, 35, 29,
                 36, 37, 38,  41, 42,  39,  43, 44, 45, 40, 46, 47}},
    DFSDataTest{"graphs/6.txt",
                1,
                {1,  2,  5,  15, 16, 17, 6,  18, 20,  21, 22,  19, 23, 24, 25,
                 7,  26, 30, 27, 31, 32, 33, 28, 34,  35, 29,  36, 37, 8,  38,
                 41, 42, 39, 43, 44, 45, 40, 46, 47,  3,  9,   48, 53, 54, 49,
                 55, 56, 57, 50, 58, 59, 60, 10, 51,  61, 62,  63, 52, 64, 65,
                 66, 67, 4,  11, 68, 79, 80, 81, 69,  82, 83,  84, 12, 70, 85,
                 86, 87, 71, 89, 72, 88, 90, 13, 73,  91, 92,  93, 74, 94, 75,
                 97, 76, 95, 96, 14, 77, 98, 99, 100, 78, 101, 102}},
    DFSDataTest{"graphs/6.txt",
                15,
                {15, 5,  2,  1,   3,  9,   48,  53, 54, 49, 55, 56, 57, 50, 58,
                 59, 60, 10, 51,  61, 62,  63,  52, 64, 65, 66, 67, 4,  11, 68,
                 79, 80, 81, 69,  82, 83,  84,  12, 70, 85, 86, 87, 71, 89, 72,
                 88, 90, 13, 73,  91, 92,  93,  74, 94, 75, 97, 76, 95, 96, 14,
                 77, 98, 99, 100, 78, 101, 102, 6,  18, 20, 21, 22, 19, 23, 24,
                 25, 7,  26, 30,  27, 31,  32,  33, 28, 34, 35, 29, 36, 37, 8,
                 38, 41, 42, 39,  43, 44,  45,  40, 46, 47, 16, 17}},
    DFSDataTest{"graphs/6.txt",
                7,
                {7,  2,  1,   3,  9,   48,  53, 54, 49, 55, 56, 57, 50, 58, 59,
                 60, 10, 51,  61, 62,  63,  52, 64, 65, 66, 67, 4,  11, 68, 79,
                 80, 81, 69,  82, 83,  84,  12, 70, 85, 86, 87, 71, 89, 72, 88,
                 90, 13, 73,  91, 92,  93,  74, 94, 75, 97, 76, 95, 96, 14, 77,
                 98, 99, 100, 78, 101, 102, 5,  15, 16, 17, 6,  18, 20, 21, 22,
                 19, 23, 24,  25, 8,   38,  41, 42, 39, 43, 44, 45, 40, 46, 47,
                 26, 30, 27,  31, 32,  33,  28, 34, 35, 29, 36, 37}},
    DFSDataTest{"graphs/6.txt",
                68,
                {68, 11,  4,  1,   2,   5,  15, 16, 17, 6,  18, 20, 21, 22, 19,
                 23, 24,  25, 7,   26,  30, 27, 31, 32, 33, 28, 34, 35, 29, 36,
                 37, 8,   38, 41,  42,  39, 43, 44, 45, 40, 46, 47, 3,  9,  48,
                 53, 54,  49, 55,  56,  57, 50, 58, 59, 60, 10, 51, 61, 62, 63,
                 52, 64,  65, 66,  67,  12, 70, 85, 86, 87, 71, 89, 72, 88, 90,
                 13, 73,  91, 92,  93,  74, 94, 75, 97, 76, 95, 96, 14, 77, 98,
                 99, 100, 78, 101, 102, 69, 82, 83, 84, 79, 80, 81}},
    DFSDataTest{"graphs/6.txt",
                84,
                {84, 69, 11,  4,  1,   2,   5,  15, 16, 17, 6,  18, 20, 21, 22,
                 19, 23, 24,  25, 7,   26,  30, 27, 31, 32, 33, 28, 34, 35, 29,
                 36, 37, 8,   38, 41,  42,  39, 43, 44, 45, 40, 46, 47, 3,  9,
                 48, 53, 54,  49, 55,  56,  57, 50, 58, 59, 60, 10, 51, 61, 62,
                 63, 52, 64,  65, 66,  67,  12, 70, 85, 86, 87, 71, 89, 72, 88,
                 90, 13, 73,  91, 92,  93,  74, 94, 75, 97, 76, 95, 96, 14, 77,
                 98, 99, 100, 78, 101, 102, 68, 79, 80, 81, 82, 83}},
    DFSDataTest{"graphs/6.txt",
                19,
                {19, 6,  2,  1,   3,  9,   48,  53, 54, 49, 55, 56, 57, 50, 58,
                 59, 60, 10, 51,  61, 62,  63,  52, 64, 65, 66, 67, 4,  11, 68,
                 79, 80, 81, 69,  82, 83,  84,  12, 70, 85, 86, 87, 71, 89, 72,
                 88, 90, 13, 73,  91, 92,  93,  74, 94, 75, 97, 76, 95, 96, 14,
                 77, 98, 99, 100, 78, 101, 102, 5,  15, 16, 17, 7,  26, 30, 27,
                 31, 32, 33, 28,  34, 35,  29,  36, 37, 8,  38, 41, 42, 39, 43,
                 44, 45, 40, 46,  47, 18,  20,  21, 22, 23, 24, 25}},
    DFSDataTest{
        "graphs/6.txt",
        20,
        {20, 18, 6,  2,  1,  3,  9,  48, 53, 54, 49, 55, 56, 57,  50, 58,  59,
         60, 10, 51, 61, 62, 63, 52, 64, 65, 66, 67, 4,  11, 68,  79, 80,  81,
         69, 82, 83, 84, 12, 70, 85, 86, 87, 71, 89, 72, 88, 90,  13, 73,  91,
         92, 93, 74, 94, 75, 97, 76, 95, 96, 14, 77, 98, 99, 100, 78, 101, 102,
         5,  15, 16, 17, 7,  26, 30, 27, 31, 32, 33, 28, 34, 35,  29, 36,  37,
         8,  38, 41, 42, 39, 43, 44, 45, 40, 46, 47, 19, 23, 24,  25, 21,  22}},
    DFSDataTest{"graphs/6.txt",
                51,
                {51, 10, 3,  1,   2,  5,   15,  16, 17, 6,  18, 20, 21, 22, 19,
                 23, 24, 25, 7,   26, 30,  27,  31, 32, 33, 28, 34, 35, 29, 36,
                 37, 8,  38, 41,  42, 39,  43,  44, 45, 40, 46, 47, 4,  11, 68,
                 79, 80, 81, 69,  82, 83,  84,  12, 70, 85, 86, 87, 71, 89, 72,
                 88, 90, 13, 73,  91, 92,  93,  74, 94, 75, 97, 76, 95, 96, 14,
                 77, 98, 99, 100, 78, 101, 102, 9,  48, 53, 54, 49, 55, 56, 57,
                 50, 58, 59, 60,  52, 64,  65,  66, 67, 61, 62, 63}},
    DFSDataTest{"graphs/7.txt",
                27,
                {27, 2,  6,  4,  11, 9,  10, 20, 21, 12, 14, 13, 7,  5,  15, 16,
                 1,  3,  17, 8,  19, 46, 18, 26, 37, 39, 25, 54, 24, 23, 22, 33,
                 29, 28, 30, 31, 34, 35, 52, 32, 53, 51, 36, 38, 40, 43, 48}},
    DFSDataTest{"graphs/7.txt", 42, {42, 44, 41, 45, 47, 49, 50}}};

INSTANTIATE_TEST_SUITE_P(dfs, DFSTest, testing::Range(0, DFSTest::count_));

TEST_P(DFSTest, Common) {
  int num_test = this->GetParam();
  DFSDataTest& data = DFSTest::test_data_[num_test];

  s21::Graph graph;
  graph.LoadGraphFromFile(data.filename_);

  s21::GraphAlgorithms alg;

  std::vector<s21::Graph::Vertex> vertices =
      alg.DepthFirstSearch(graph, data.start_vertex_);

  EXPECT_EQ(vertices.size(), data.vertices_.size());

  for (size_t i = 0; i < vertices.size(); ++i) {
    EXPECT_EQ(vertices[i], data.vertices_[i]);
  }
}
